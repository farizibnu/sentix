<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Berliana.El Sentix Sign Up</title>
    <!-- Include Bootstrap CSS from a CDN -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <!-- Add this link to include Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <nav class="navbar navbar-expand-lg static-top">
      <div class="container">
        <div>
          <img
            class="m-1"
            id="logo"
            src="{{ url_for('static', filename='img/logo.png') }}"
            alt="Logo"
          />
        </div>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="" id="">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <div class="dropdown">
                <a
                  href="#"
                  id="dropdownToggle"
                  data-bs-toggle="dropdown"
                  data-bs-target="#dropdownMenu"
                  aria-expanded="false"
                  class="dropdown-toggle"
                  style="
                    color: white;
                    text-decoration: none;
                    border-bottom: 1px solid transparent;
                  "
                >
                  <img
                    class="m-1 pe-1"
                    id="user-logo"
                    src="{{ url_for('static', filename='img/user.png') }}"
                    alt="Logo"
                  />
                  {{ session['username'] }}
                  <!-- Display the logged-in username -->
                </a>

                <ul class="dropdown-menu" id="dropdownMenu">
                  <li>
                    <a
                      class="dropdown-item"
                      href="{{ url_for('logout') }}"
                      style="color: black"
                    >
                      <img
                        src="{{ url_for('static', filename='img/logout.png') }}"
                        alt="Logout Icon"
                        class="logout-icon"
                      />
                      Logout
                    </a>
                  </li>
                </ul>
              </div>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container-fluid pt-4">
        <div class="row justify-content-center">
            <div class="col-12 col-sm-10 col-md-12 col-lg-11 col-xl-10">
                <div id="resultCard" class="card d-flex mx-auto">
                    <div class="row">
                        <div id="searchHashtag" class="col-lg-12 c2 px-5 pt-5">
                            <div class="container">
                                <div class="row justify-content-left">
                                    <div class="d-flex">
                                        <div class="p-2 col-md-1">
                                            <a href="{{ url_for('search') }}" class="">
                                                <i class="fas fa-arrow-left"></i>
                                            </a>
                                        </div>
                                        <div class="p-2 row justify-content-center flex-grow-1">
                                            <div class="col-md-5 text-center">
                                                <h3 class="text-bold">Result</h3>
                                            </div>
                                        </div>
                                        <div class="p-2 col-md-1"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <form id="searchForm" action="/result" method="post" class="text-center my-4">
                                        <div class="input-group">
                                            <input type="text" class="form-control search-form"
                                                placeholder="#Jungkook" />
                                        </div>
                                    </form>
                                </div>
                                <div class="col-md-6 d-flex justify-content-end align-items-center">
                                    <div class="my-4">
                                        <h6 class="mb-2">Jumlah Sentimen Positif: {{ positive_count }}</h6>
                                        <h6>Jumlah Sentimen Negatif: {{ negative_count }}</h6>
                                    </div>
                                </div>
                            </div>
                            <table class="table">
                                <thead>
                                    <tr>
                                        <!-- <th class="usernameTable" scope="col">Username</th> -->
                                        <th scope="col">Comment</th>
                                        <!-- <th class="likesTable" scope="col">Likes</th>
                                        <th class="repliesTable" scope="col">Replies</th> -->
                                        <th class="sentimentTable" scope="col">Sentimen</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for comment in comments %}
                                    <tr>
                                        <td>{{ comment.text }}</td>
                                        <td>
                                            {% if comment.sentiment == 'positive' %}
                                                <span class="badge text-bg-success">Positive</span>
                                            {% elif comment.sentiment == 'negative' %}
                                                <span class="badge text-bg-danger">Negative</span>
                                            {% else %}
                                                <span class="badge text-bg-secondary">Neutral</span>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                      </div>
                      <div class="p-2 col-md-1"></div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <form
                      id="searchForm"
                      action="/result"
                      method="post"
                      class="text-center my-4"
                    >
                      <div class="input-group">
                        <input
                          type="text"
                          class="form-control search-form"
                          placeholder="#Jungkook"
                        />
                      </div>
                    </form>
                  </div>
                  <div
                    class="col-md-6 d-flex justify-content-end align-items-center"
                  >
                    <div class="my-4">
                      <h6 class="mb-2">
                        Jumlah Sentimen Positif: 24 {{ positive_sentiments }}
                      </h6>
                      <h6>
                        Jumlah Sentimen Negatif: 23 {{ negative_sentiments }}
                      </h6>
                    </div>
                  </div>
                </div>
                <table class="table">
                  <thead>
                    <tr>
                      <!-- <th class="usernameTable" scope="col">Username</th> -->
                      <th scope="col">Comment</th>
                      <!-- <th class="likesTable" scope="col">Likes</th>
                                        <th class="repliesTable" scope="col">Replies</th> -->
                      <th class="sentimentTable" scope="col">Sentimen</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for comment in comments %}
                    <tr>
                      <td>{{ comment.text }}</td>
                      <td>{{ comment.sentiment }}</td>
                    </tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Include Bootstrap JavaScript and Popper.js from CDNs if needed -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Select the dropdown toggle element
        var dropdownToggle = document.querySelector("#dropdownToggle");

        // Add a click event listener to the dropdown toggle
        dropdownToggle.addEventListener("click", function () {
          // Toggle the dropdown menu display
          var dropdownMenu = document.querySelector("#dropdownMenu");
          dropdownMenu.classList.toggle("show");
        });

        // Close the dropdown when clicking outside of it
        document.addEventListener("click", function (event) {
          var dropdownMenu = document.querySelector("#dropdownMenu");
          if (
            !event.target.matches("#dropdownToggle") &&
            !dropdownMenu.contains(event.target)
          ) {
            dropdownMenu.classList.remove("show");
          }
        });
      });
    </script>
  </body>
</html>
